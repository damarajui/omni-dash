meta:
  name: Page Performance Dashboard
  description: >
    Page-level performance metrics with a data table and bar charts.
    Ideal for SEO page analysis, landing page performance, or content
    analytics dashboards.
  tags: [page, performance, seo, content, table]

variables:
  dashboard_name:
    type: string
    required: true
    description: Dashboard display name
  omni_model_id:
    type: string
    required: true
    description: Omni model UUID
  omni_table:
    type: string
    required: true
    description: Omni table/view name
  page_column:
    type: string
    required: true
    description: Page path or URL column
  category_column:
    type: string
    required: false
    default: ""
    description: Optional page category/type column
  time_column:
    type: string
    required: true
    default: week_start
    description: Time dimension column
  metric_columns:
    type: list
    required: true
    description: Metric columns (visits, bounce_rate, signups, etc.)
  primary_metric:
    type: string
    required: true
    description: Main sorting metric for the table

dashboard:
  name: "{{ dashboard_name }}"
  model_id: "{{ omni_model_id }}"
  refresh_interval: 3600
  filters:
    - field: "{{ omni_table }}.{{ time_column }}"
      type: date_range
      label: Date Range
  tiles:
    - name: Top Pages by {{ primary_metric | replace('_', ' ') | title() }}
      chart_type: table
      query:
        table: "{{ omni_table }}"
        fields:
          - "{{ omni_table }}.{{ page_column }}"
          - "{{ omni_table }}.{{ metric_columns[0] }}"
          - "{{ omni_table }}.{{ metric_columns[1] }}"
        sorts:
          - column_name: "{{ omni_table }}.{{ primary_metric }}"
            sort_descending: true
        limit: 100
      position: {x: 0, y: 0, w: 12, h: 6}
    - name: "{{ primary_metric | replace('_', ' ') | title() }} by Page"
      chart_type: bar
      query:
        table: "{{ omni_table }}"
        fields:
          - "{{ omni_table }}.{{ page_column }}"
          - "{{ omni_table }}.{{ primary_metric }}"
        sorts:
          - column_name: "{{ omni_table }}.{{ primary_metric }}"
            sort_descending: true
        limit: 20
      vis_config:
        x_axis: "{{ omni_table }}.{{ page_column }}"
        y_axis:
          - "{{ omni_table }}.{{ primary_metric }}"
      position: {x: 0, y: 6, w: 6, h: 5}
    - name: "{{ metric_columns[1] | replace('_', ' ') | title() }} Trend"
      chart_type: line
      query:
        table: "{{ omni_table }}"
        fields:
          - "{{ omni_table }}.{{ time_column }}"
          - "{{ omni_table }}.{{ metric_columns[1] }}"
        sorts:
          - column_name: "{{ omni_table }}.{{ time_column }}"
            sort_descending: false
      vis_config:
        x_axis: "{{ omni_table }}.{{ time_column }}"
        y_axis:
          - "{{ omni_table }}.{{ metric_columns[1] }}"
      position: {x: 6, y: 6, w: 6, h: 5}
